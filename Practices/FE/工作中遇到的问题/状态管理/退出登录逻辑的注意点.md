# 退出登录逻辑的注意点


<!-- TOC -->

- [退出登录逻辑的注意点](#退出登录逻辑的注意点)
    - [两种进入登录页的情况](#两种进入登录页的情况)
    - [SPA 退出登录时使用路由回到登录页的问题](#spa-退出登录时使用路由回到登录页的问题)

<!-- /TOC -->


## 两种进入登录页的情况
* 主动退出登录
* 权限不足自动进入登录页


## SPA 退出登录时使用路由回到登录页的问题
1. 在 SRP 的情况中，退出登录可以选择路由的方式，不会产生页面刷新的情况。
2. 但这种方式的问题在于，store 中的状态不会被初始化。
3. 对于账号、用户等数据，你必须保证在退出登录的逻辑中一个不漏的初始化。
4. 而其他的一些业务数据，不初始化同样存在危险：
    * 有些数据是在项目入口文件中请求的，但是如果只是路由，并不会触发项目入口文件再次执行。
    * 分页加载的数据，如果记录当前页码的属性和现有列表数据没有重置，进入组件后就会错误的加载。
    * 设置了防止二次加载的请求，只在当前值为空的时候才请求，重登录后不会重请求。


