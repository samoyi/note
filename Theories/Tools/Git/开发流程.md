# 开发流程

GitHub Flow 和 Git Flow


## GitHub Flow —— 以部署为中心的开发模式
这是一个以部署为中心的开发流程。在实际开发中往往 1 天之内会实施几十次部署，而支撑这一切
的，就是足够简单的开发流程以及完全的自动化。

### GitHub Flow 的流程
#### 大致流程
1. 令 master 分支时常保持可以部署的状态
2. 进行新的作业时要从 master 分支创建新分支，新分支名称要具有描述性
3. 在新建的本地仓库分支中进行提交
4. 在 GitHub 端仓库创建同名分支，定期 push
5. 需要帮助或反馈时创建 Pull Request，以 Pull Request 进行交流
6. 让其他开发者进行审查，确认作业完成后与 master 分支合并
7. 与 master 分支合并后立刻部署

#### 随时部署，没有发布的概念
1. 这个流程必须遵守“令 master 分支随时保持可以部署的状态”这一规则。每隔几小时进行一次部
署，可以有效防止同时出现多个严重 BUG。
2. 虽然有时仍会有一些小 BUG 出现，但只要将相应的提交 revert 或者提交修正过的代码即可轻
松应对。
3. 这一流程要以小时甚至分钟为单位持续地进行部署，所以不存在发布的概念。因此，不会出现让
HEAD 返回去指向很久之前的提交借以取消整个作业内容的情况。
4. 由于 master 分支时常保持着可以部署的状态，所以开发者可以随时创建新的分支。
5. 要注意，没有进行过测试或者测试未通过的代码绝不可以合并到 master 分支。因此势必要用到
持续集成等手段。

#### 进行新的作业时要从 master 分支创建新分支
1. 进行新的作业时要从 master 分支创建新分支，无论是添加新功能还是修复 BUG 都是如此。
2. 此外，新分支的名称要具有描述性。所谓具有描述性的名称，是指该名称能直观正确地表达这个
分支的特性，其他开发者可以通过这些名字清楚地了解到该分支正在进行什么工作。
3. 采用这一方式，开发者在查看远程仓库的分支列表时，能够对当前团队正在实施的任务一目了然。
另外，由于分支名明确描述了工作内容，即便开发者需要先去做其他工作，回来时也能很快想起该分
支的工作目标。

#### 在新创建的分支中进行提交
1. 在前面的步骤中，开发者为了进行新的更改而创建了新分支，并且明确了在这个分支中应该做哪
些工作。接下来就可以在这个分支中修改代码，并进行提交了。
2. 修改代码时要注意，绝对不能进行与该分支工作内容无关的修改。
3. 在这一阶段，开发者要在提交的粒度上多花心思。有意识地减小提交的规模，一方面便于清楚地
表达目的，另一方面有助于其他开发者对 Pull Request 进行审查。

#### 定期 push
1. 在这一开发流程中，由于除了 master 分支之外都是作业中的分支，所以 push 作业分支时不
需要有太多顾虑。
2. 在开发过程中，建议开发者定期将本地仓库中创建的分支以同名形式 push 到 GitHub 端的远
程仓库。
3. 这样一来不仅可以备份代码，还会定期给开发者团队创造交流的机会。其他开发者在做什么工作，
是否需要帮助等，团队成员可以通过 GitHub 的分支列表页面一目了然。
4. 在开发过程中，最好让其他开发者能够看到自己编写的代码，同时养成积极查看其他人代码的习
惯。

#### 使用 Pull Request
1. Pull Request 不一定非要在与 master 分支合并时才使用。既然是团队开发，完全可以尽早创
建 Pull Request 让其他开发者进行审查，一边听取反馈一边编写代码，没必要等到与 master 分
支合并时再进行。
2. Pull Request 具有显示差别以及对单行代码插入评论的功能，开发者可以利用这些进行交流。
3. 另外，如果希望得到特定开发者的反馈或建议，可以在评论中加入“@ 用户名”，给该用户发送
Notifications。

#### 务必让其他开发者进行审查
1. 一个分支的作业结束后，需要注明作业已完成，让其他开发者进行审查。
2. 找其他开发者看一看自己编写的代码，可以有效防止想当然的错误或者低级失误。
3. 征得多个人同意后，便可找个适当的时机让其他开发者将该分支与 master 分支进行合并。

#### 合并后立刻部署
1. 代码合并至 master 分支并且通过所有自动测试之后，需要立刻进行部署。
2. 在部署之后，需要确认刚刚合并的代码是否存在问题。

### 实践 GitHub Flow 的前提条件
#### 部署作业完全自动化
部署的相关作业必须实现自动化。这一开发流程在一天当中需要多次部署，以旧有开发模式按部署文
档进行部署作业会浪费相当多的时间，同时还很可能发生操作失误。

#### 重视测试


## Git Flow —— 以发布为中心的开发模式
