# 优化目录


## 与性能相关的四个过程
* 数据在网络上的传输
* 站点服务器处理请求并生成回应数据
* 浏览器本地计算和渲染
* 用户使用过程时的请求和 DOM 更新


## 性能优化的个方面
* 减少请求数
* 减少资源大小
* 减少传输耗时
* 加速渲染
* 加速计算
* 并行操作


## 减少请求数
能不请求就尽量别请求，能少请求就尽量少请求

### 不请求
* DataURL
* 使用 CSS/SVG/ICON Font 替代图片
* 使用缓存（浏览器，代理服务和CDN，最终服务器）

### 少请求
* 合并 CSS、JS、图片、AJAX 的请求
* 减少重定向


## 减少资源大小
如果要请求，就尽量减少资源大小

### 直接压缩
* 前端资源压缩，服务器GZip

### 使用压缩比更大的文件类型
* 例如使用 WebP


## 减少传输耗时
* 使用 CDN、合理部署服务器
* 域名收敛：手机淘宝前端 [2015 的文章](https://github.com/amfe/article/issues/1)
> 在复杂的国内移动互联网网络环境下，不同域名的解析速度可能会相差数十倍。 所以你需要有意
识的收敛页面资源所需解析的域名数, 特别是会阻塞页面渲染的CSS,JS,Font资源。 很多性能糟糕
页面究其原因或许会是引入的资源域名解析速度很慢或完全不能正确解析。在我们的实践中, 一个页
面所产生的域名解析数不能超过5个。


## 加速渲染
请求到资源后，前端加速渲染

### 减少节点数量
减少 DOM 节点和 CSSOM 节点，加快解析速度

### JS 不阻塞渲染
* 使用异步脚本
* 耗时操作延后执行

### 减少 DOM 改变
* DocumentFragment
* 虚拟 DOM


## 加速计算
### 减少耗时计算
* 耗时计算分段进行，尽量不阻塞
* 缓存耗时计算结果


## 并行操作
* 域名拆分：HTTP2 版本之前，增加浏览器并行请求数量
* 耗时计算使用 WebWorker






## 性能审查
* Chrome DevTools



### 减少视觉等待
进度条、加载动画等


## 用户使用过程时的请求和 DOM 更新
* 上述三种过程都涉及
* 异步加载
* 预加载


## 首屏性能优化
与性能相关的四个过程中，前三个都是与首屏性能有关的

### 延迟加载
合理安排请求顺序，保证主要内容优先显示


## References
* [《构建高性能Web站点（修订版）》](https://book.douban.com/subject/10812787/)
* [Google developers](https://developers.google.com/web/fundamentals/performance/why-performance-matters/)
* [Best Practices for Speeding Up Your Web Site](https://developer.yahoo.com/performance/rules.html)
* [阿里无线前端性能优化指南 (Pt.1 加载期优化) ](https://github.com/amfe/article/issues/1)
