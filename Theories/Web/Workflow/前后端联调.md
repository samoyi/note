# 前后端联调


## 解决跨域
1. 因为前后端联调一般都涉及跨域请求数据，所以要解决跨域的问题
2. 最简单的方法就是`webpack-dev-server`的`devServer.proxy`可以实现跨域请求。
3. 如果使用 vue-cli2 的话，该属性的设置是通过`/config/index.js`中的`proxyTable`属性
。例如
    ```js
    proxyTable: {
        '/api': {
            target: 'http://localhost:88',
            pathRewrite: {'^/api' : ''},
            // changeOrigin: true, // 看到说要这样才能实现跨域，不过测试时发现并不用
        },
    }
    ```
4. 现在，比如你想请求`http://localhost:3000/posts`，请求路径就可以`/api/posts`。
5. 虽然还没有实践，不过看起来这样不仅解决了跨域，而且在从请求 mock 数据切换为请求实际数
据时，不需要逐个修改请求路径，只要修改`proxyTable.target`就行了


## 域名映射
1. 有些未打包的静态文件需要从静态资源服务器上引用，问题是你不可能随时把需要的资源上传到
最终的域名下，开发时你可能还是要引用本地的资源。因此你现在需要使用本地资源。这就涉及你开
发时的域名和最终的域名不一致的情况。
2. 而且更重要的是，AJAX 在开发的时候也只能向本地请求，而和后端联调的时候又要使用后端 IP
或实际的域名。
3. 以上两种路径在调试阶段可能会反复的切换。虽然可以通过编辑器统一替换项目里的路径，但还
是感觉不好。

### 通过`proxyTable`实现域名映射
从上面介绍的例子可以看到，在引用资源的时候统一使用路径比如`/static`，需要切换本地和远程
时，只需要修改`proxyTable`中的映射即可。AJAX 请求时也可以使用统一路径比如`/api`。

### 修改 hosts 文件改变域名解析
1. 开发时就使用远程的域名，但在 hosts 文件里把该域名解析为本地 IP。需要切换时，只需要修
改 hosts 文件里的映射。
2. 但是感觉这种直接修改系统文件的方法不太好。


## References
* [vue菜鸟从业记：公司项目里如何进行前后端接口联调](https://zhuanlan.zhihu.com/p/39140512)
* [前后端联调](https://www.cnblogs.com/frx666/p/6877578.html)
