# Buffer 与性能


## Buffer 比字符串传输更高效
1. Buffer 在文件 I/O 和网络 I/O 中运用广泛，尤其在网络传输中，它的性能举足轻重。在应用
中，我们通常会操作字符串，但一旦在网络中传输，都需要转换为 Buffer，以进行二进制数据传输。
在 Web 应用中，字符串转换到 Buffer 是时时刻刻发生的，提高字符串到 Buffer 的转换效率，
可以很大程度地提高网络吞吐率。
2. 通过预先转换静态内容为 Buffer 对象，可以有效地减少 CPU 的重复使用，节省服务器资源。
在 Node 构建的 Web 应用中，可以选择将页面中的动态内容和静态内容分离，静态内容部分可以
通过预先转换为 Buffer 的方式，使性能得到提升。由于文件自身是二进制数据，所以在不需要改
变内容的场景下，尽量只读取 Buffer，然后直接传输，不做额外的转换，避免损耗。


## 文件读取时的性能
1. Buffer 的使用除了与字符串的转换有性能损耗外，在文件的读取时，`highWaterMark`的设置
对性能的影响至关重要。
2. [《深入浅出Node.js》](https://book.douban.com/subject/25768396/)中详细的解释不
懂，但基本原理就是，`highWaterMark`的设置越小，就会进行越多次数的读取操作，从而消耗更多
时间。


## References
* [《深入浅出Node.js》](https://book.douban.com/subject/25768396/)
