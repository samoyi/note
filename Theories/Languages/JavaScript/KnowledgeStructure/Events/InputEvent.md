# Input Event


## `input`
1. 从字面上的理解，就是输入，即输入触发的事件。
2. 在输入字母和数字时，这完全符合预期，`ev.data`就是每次输入事件时的值。例如输入`hello`，总共会输入5次，触发5次`input`事件，每次的`ev.data`分别是：`h`、`e`、`l`、`l`、`o`
3. 但用拼音输入“你好”的时候，则不是那么直观。输入“你好”总共要按6次键：`n`、`i`、`h`、`a`、`o`和空格。
4. 总共会触发6次`input`，`ev.data`分别是：`n`、`ni`、`nih`、`niha`、`nihao`和`你好`。
5. 按照[规范](https://w3c.github.io/uievents/#event-type-input)上的说法：A user agent MUST dispatch this event immediately after the DOM has been updated，一共触发6次是合理的，因为每次按键`input`里的值都会发生变化。
6. 但还有比较不直观的，就是为什么第2到第5次不是`i`、`h`、`a`、`o`？
7. [规范](https://w3c.github.io/uievents/#event-type-input)中对该属性的解释：the string containing the data that has been added to the element 以及 `data` holds the value of the characters generated by an input method.
8. 那是不是应该理解为，这四次虽然键盘输入都只是一个字符，但实际对表单的输入却是`ni`、`nih`、`niha`、`nihao`。
9. 也就是说，在进行拼音输入的时候，输完一个字母后并不会刷新清空再输第二个，而是累加的计算输入值。虽然不知道`input`为什么是这种思路，但这倒是符合输入法的思路，毕竟只有累加了才有意义。


## composition 事件
### `compositionstart`
* The `compositionstart` event is fired when the composition of a passage of text is prepared (similar to `keydown` for a keyboard input, but fires with special characters that require a sequence of keys and other inputs such as speech recognition or word suggestion on mobile).例如使用拼音输入法时，开始输入拼音的时候就会触发该事件。
* 这个事件获得不了关于输入的有用信息，输入的信息要使用下面的`compositionupdate`事件来获得

### `compositionupdate`
* The `compositionupdate` event is fired when a character is added to a passage of text being composed (fires with special characters that require a sequence of keys and other inputs such as speech recognition or word suggestion on mobile).
* 通过`ev.data`获取那些组成用的字符，例如拼音输入法的拼音。

### `compositionend`
* The `compositionend` event is fired when the composition of a passage of text has been completed or cancelled (fires with special characters that require a sequence of keys and other inputs such as speech recognition or word suggestion
on mobile).
* `ev.data`获得是最终生成的字符串，例如拼音生成的汉字。
