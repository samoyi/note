# 把条件分支语句提炼成函数

## 美学
1. 将杂乱的东西包裹起来，让它对于使用者变得整洁
2. 也许这个东西内部仍然杂乱，但已经无所谓了，没有人在需要关心它的内部，只要它的内部不会有隐患。


## 好处
1. 复杂的条件判断语句看起来很费劲，尤其是各种嵌套的或且非
2. 看代码的人不能立刻看明白这一堆到底是在说什么条件，而且很容易看错
3. 你既要看复杂的条件判断，又要同时看每种判断里面具体执行的语句
3. 这时可以把它包装为一个命名语义明确的函数
4. 而且如果若干的一组条件判断语句都包装到一起，放到一个比如对象里，则可以直接在对象里管理各种条件判断，而不需要每次都进入混杂着条件判断和具体执行的分支语句中去修改条件或者修改执行语句


## 例子
1. 比如一个商品在不同的季节，会在基准价上有不同的增减，可以粗暴的像下面这样写条件判断语句
    ```js
    var getPrice = function( price ){
        var date = new Date();
        if ( date.getMonth() >= 3 && date.getMonth() <= 5 ){    // 春天
            return price * 0.9;
        }
        else if ( date.getMonth() >= 6 && date.getMonth() <= 8 ){    // 夏天
            return price * 1;
        }
        else if ( date.getMonth() >= 9 && date.getMonth() <= 11 ){    // 秋天
            return price * 1.1;
        }
        else { // 冬天
            return price * 1.2;
        }
        return price;
    };
    ```
    但是这样的判断语句读起来很费劲，所以还要加上注释让人能尽快看懂。而且改起来还要进入复杂的条件分支中。改成如下：
    ```js
    const Season = {
        isSpring(){
            return date.getMonth() >= 3 && date.getMonth() <= 5;
        },
        isSummer(){
            return date.getMonth() >= 6 && date.getMonth() <= 8;
        },
        isAutumn(){
            return date.getMonth() >= 9 && date.getMonth() <= 11;
        },
    };

    var getPrice = function( price ){
        var date = new Date();
        if ( Season.isSpring() ){
            return price * 0.9;
        }
        else if ( Season.isSummer() ){
            return price * 1;
        }
        else if ( Season.isAutumn() ){
            return price * 1.1;
        }
        else {
            return price * 1.2;
        }
        return price;
    };
    ```
    这样改写后，条件分支读起来很流畅，不需要注释。读条件分支的时候不需要看复杂的条件判断语句，只需要专注看每个分支的执行逻辑；而修改条件判断语句的时候也不会再受到条件执行语句的影响。


## References
* [《JavaScript设计模式与开发实践》](https://book.douban.com/subject/26382780/)
