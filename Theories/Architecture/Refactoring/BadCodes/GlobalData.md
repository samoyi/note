# Global Data


<!-- TOC -->

- [Global Data](#global-data)
    - [思想](#思想)
        - [消除非必要的可变性](#消除非必要的可变性)
    - [危害](#危害)
        - [和 *Mutable Data* 结合起来危害才明显](#和-mutable-data-结合起来危害才明显)
        - [不一定是真的全局](#不一定是真的全局)
    - [解决思路](#解决思路)
    - [重构方法参考](#重构方法参考)
    - [References](#references)

<!-- /TOC -->


## 思想
### 消除非必要的可变性
1. 一个对象单纯的全局可见本身不会引起失控。问题在于这个对象全局可被修改，或者是对象的行为有副作用。
2. 当对象被全局中任何一个人修改时，无法保证其他读取该对象的人会预期这一次的修改；同样，对象的行为产生副作用时，也无法保证其他读取该对象的人会预期这一次的副作用。


## 危害
### 和 *Mutable Data* 结合起来危害才明显
随处可见，谁都能修改

### 不一定是真的全局
1. 只要是范围比较大，都可能会带来危害。
2. 因此要尽量的让数据只限定在最小范围内。


## 解决思路
* 缩减可见范围：在小范围内可变就相对好控制一些
* 收紧修改权限：只允许通过特定的方法修改


## 重构方法参考
* Encapsulate Variable：如果不得不使用全局变量，那么监听并控制全局变量的访问和修改。


## References
* [《重构（第2版）》](https://book.douban.com/subject/33400354/)
