# Replace Subclass with Delegate

<!-- TOC -->

- [Replace Subclass with Delegate](#replace-subclass-with-delegate)
    - [思想](#思想)
    - [Motivation](#motivation)
        - [为了实现特定的功能，要创建各种奇奇怪怪的类](#为了实现特定的功能要创建各种奇奇怪怪的类)
        - [为了使用某个类的功能而继承，就要和这个类耦合](#为了使用某个类的功能而继承就要和这个类耦合)
        - [语义化](#语义化)
        - [组合（委托）优于继承？](#组合委托优于继承)
    - [Mechanics](#mechanics)
    - [References](#references)

<!-- /TOC -->


## 思想
和 Replace Superclass with Delegate 重构的思想一样


## Motivation
### 为了实现特定的功能，要创建各种奇奇怪怪的类
1. 假设有一个类是 “人”，如果想要使用各种不同类型的人的功能，就要创建各种类型的人的子类。穷人、富人、胖人、瘦人、穷旁人、穷瘦人、富旁人、富瘦人。
2. 但你只是想实现功能而已，并不想在语义上创建各种人的子类。
3. 因此你只需要在各种人的场景中，在需要使用 “人” 类功能的地方，委托 “人” 类来实现功能就行了。

### 为了使用某个类的功能而继承，就要和这个类耦合
1. 使用继承的话，子类就要继承父类的所有属性，而且父类发生了变化，子类也会相应的变化。
2. 合理的父子类继承，子类就应该无条件的接受父类的所有特征。子类可以在父类的基础上再扩展或改进，而不应该违背父类的基础。
3. 比如灵长目作为哺乳纲的子类，肯定是哺乳纲有的特点灵长目也要有，而不能是只有哺乳纲的部分特点。
4. 如果你只是想使用一个类的部分功能就认其作父，显然上面说到的继承的特征就是不期望的。

### 语义化
1. 继承是有明确语义的，子类就应该是父类的一个详细分类，而不仅仅是和父类有一些相同的特征而已。
2. 只是为了使用一个类就继承它，就破坏了这种语义化。

### 组合（委托）优于继承？
1. 继承本身是很好的，它有很明确的含义。在一个规范的层级分类系统里，显然继承要比组合更合适。继承是规整而不灵活，组合是灵活而不规整。
2. 你如果就是要建模 “父类——子类” 的关系，那就使用继承；而如果只是想让一个类有其他类的某些属性，那就是用组合。


## Mechanics


## References
* [《重构（第2版）》](https://book.douban.com/subject/33400354/)
