# OCP


<!-- TOC -->

- [OCP](#ocp)
    - [设计思想](#设计思想)
    - [隔离变化](#隔离变化)
    - [涉及的重构方法](#涉及的重构方法)
    - [涉及的设计模式](#涉及的设计模式)
    - [References](#references)

<!-- /TOC -->


## 设计思想
1. 顶层设计原则：$ETC_h$。
2. 当我们设计一个函数、一个模块或者一个系统时，我们希望它可以尽量应对外部的变化，而不需要频繁修改。
3. 当然现实中一般不会有这么一劳永逸，但我们可以尽力的，使得外部变化时，内部的修改尽可能的小。
4. 总之，变化是危险的，尽可能的隔离变化。


## 隔离变化
1. 经常变动的和不常变动的分离开，保证经常变动的部分修改的时候不影响其他部分。
2. 在实际中，常见的就是数据和执行环境分离。数据时经常变动的，而处理数据的执行环境应该是稳定的。分离之后就降低了后续修改和扩展的成本。
3. 而且从语义上来说，数据和状态就应该进行分离。


## 涉及的重构方法
* Use decision table to replace complicated conditions


## 涉及的设计模式
* 状态模式：状态机本身作为环境，其执行逻辑是不常变动的。而各种状态实际上是作为状态机的输入数据，针对不同的需求，可能输入不同的状态。
* 策略模式


## References
* [*Refactoring: Improving the Design of Existing Code,Second Edition*](https://book.douban.com/subject/30332135/)
