# 辅助调试


## 不要用产品阶段代码的标准开发程序
1. 产品阶段代码要求高效和健壮，这就要求尽可能少的使用调试、辅助工具，尽可能的包容位置的错误。
2. 但如果开发阶段也完全这个标准，那就会导致不能清晰的理解程序，不能更多的发现问题，反而会降低产品阶段的高效和强壮。
3. 因此开发阶段要尽早、尽多的引入辅助工具和调试代码，只需要保证在编译为产品代码时不把这些内容编译进去即可。


## 采用进攻式编程
1. 对于异常情况的处理，在开发阶段应该尽量暴露异常，而在产品阶段应该尽量静默处理。
2. 例如有一个期望处理五种情况的 `case` 语句，那在开发阶段就不应该容忍程序执行到 `default` 的分支，因为这是在你期望的情况之外的。而在产品阶段为了更稳定的使用，还是应该在 `default` 中处理可能未预期的情况。
3. 下面列出一些进攻式编程在开发阶段的具体方法：
    * 确保断言会导致程序终止，而不是可以先忽略掉；
    * 完全填充分配到的内存，这样可以检测到内存分配错误；
    * 完全填充已分配到的所以后文件或流，这样可以排查出文件格式错误；
    * 确保 `default` 分支或 `else` 分支都能产生无法被忽视的错误，这样可以看到未预期的情况；
    * 在删除一个对象前把它填满垃圾数据；
    * 



## References
* [《代码大全（第2版）》](https://book.douban.com/subject/1477390/)